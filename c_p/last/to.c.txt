I2luY2x1ZGUgPHN0ZGlvLmg+DQojaW5jbHVkZSA8c3RkbGliLmg+DQojaW5jbHVkZSA8dGltZS5oPg0KI2luY2x1ZGU8c3RyaW5nLmg+DQovKmludCB0b2NoYXIoaW50ICBjaGEpDQp7DQogIGlmKGNoYSA+PSAwICYmIGNoYSA8PSAyNSkNCiAgICAgICAgICAgIGNoYT1jaGErJ0EnOw0KICBlbHNlIGlmKGNoYT49MjYgJiYgY2hhIDw9IDUxKQ0KICAgICAgICAgICAgY2hhID1jaGEgLSAyNiArJ2EnOw0KICBlbHNlIGlmKGNoYSA+PSA1MiAmJiBjaGEgPD0gNjEpDQogICAgICAgICAgICBjaGEgPSBjaGEgLSA1MiArICcwJzsNCiAgZWxzZSBpZihjaGEgPT0gNjIpDQogICAgICAgICAgICBjaGEgPSAnKyc7DQogIGVsc2UgaWYoY2hhID09IDYzKQ0KICAgICAgICAgICAgY2hhID0gJy8nOw0KCQlyZXR1cm4gY2hhOw0KfQ0KKi8NCnZvaWQgZ2V0bmFtZShjaGFyICpjaCkNCntpbnQgaT0wLGo9MDsNCgl3aGlsZShjaFtpKytdKQ0KCXsNCgkJaWYoY2hbaS0xXT09J1xcJykNCgkJCWo9MDsNCgkJY2hbaisrXT1jaFtpXTsNCg0KCX1jaFtpXT0nXDAnOw0KfQ0KaW50IG1haW4oaW50IGFyZ2MsY2hhciogYXJndltdKQ0Kew0KICAgIEZJTEUgKmZwLCAqcGljOw0KCWNoYXIgdG9jaGFyWzY0XT0iQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7DQogICAgbG9uZyBsZW5ndGg7cmVnaXN0ZXIgaW50IGk9MDsNCiAgICB1bnNpZ25lZCBjaGFyICpzdHI7Y2hhciAqY2hmOw0KICAgIHVuc2lnbmVkIGNoYXIgY2hbM10sY2g0WzRdOw0KICAgIGZwID0gZm9wZW4oYXJndlsxXSwgInJiIik7DQoJY2hmPWFyZ3ZbMV07DQoJZ2V0bmFtZShjaGYpOw0KCXN0cmNhdChjaGYsIi50eHQiKTsNCiAgICBwaWMgPSBmb3BlbihjaGYsICJ3dCsiKTsNCiAgICBpZiAocGljID09IE5VTEwpDQoJew0KCQlwcmludGYoImNhbm5vdCBvcGVuIGluZmlsZVxuIik7DQoJCXJldHVybiAwOw0KCX0NCglpZiAoZnAgPT0gTlVMTCkNCgl7DQoJCXByaW50ZigiY2Fubm90IG9wZW4gaW5maWxlXG4iKTsNCgkJcmV0dXJuIDA7DQoJfQ0KCWZzZWVrKGZwLCAwTCwgU0VFS19FTkQpOw0KICAgIGxlbmd0aCA9IGZ0ZWxsKGZwKTsNCiAgICBzdHIgPSAodW5zaWduZWQgY2hhciAqKW1hbGxvYyhzaXplb2YodW5zaWduZWQgY2hhcikgKiBsZW5ndGgpOy8qyv3X6XN0cltdKi8NCiAgICByZXdpbmQoZnApOyAgICANCglmcmVhZChzdHIsIDEsIGxlbmd0aCwgZnApOy8qsKS49rbBs/YqLw0KICAgIHdoaWxlKGxlbmd0aD4wKQ0Kew0KCQ0KCWlmKGxlbmd0aCA+IDIpDQogICB7CQ0KICAgIGNoWzBdPXN0cltpKytdOw0KCWNoWzFdPXN0cltpKytdOw0KCWNoWzJdPXN0cltpKytdOw0KCWNoNFswXT0gY2hbMF0+PjI7DQoJY2g0WzFdPSAoKGNoWzBdJjMpPDw0KXwoY2hbMV0+PjQpOy8qyLe2qMewsd/KxzCyxdfz0sYqLw0KCWNoNFsyXT0gKChjaFsxXSYweEYpPDwyKXwoY2hbMl0+PjYpOwkvKsi3tqjHsLHfyscwssXX89LGKi8NCgljaDRbM109IGNoWzJdJjYzOw0KLypub3Qgc3VjY2Vzc2Z1bA0KY2g0WzBdPWNoWzBdPj4yOw0KY2g0WzFdPShjaFswXTw8Nik+PjIrKGNoWzFdPj40KTsNCmNoNFsyXT0oY2hbMV08PDQpPj4yKyhjaFsyXT4+Nik7DQpjaDRbM109KGNoWzJdPDwyKT4+MjsqLw0KCWNoNFswXT10b2NoYXJbY2g0WzBdXTsNCgljaDRbMV09dG9jaGFyW2NoNFsxXV07IA0KCWNoNFsyXT10b2NoYXJbY2g0WzJdXTsgCQ0KCWNoNFszXT10b2NoYXJbY2g0WzNdXTsgDQoJDQoNCiAgIGZwcmludGYocGljLCAiJWMlYyVjJWMiLCAoY2g0WzBdKSwgKGNoNFsxXSksIChjaDRbMl0pLChjaDRbM10pKTsNCiAgIH0NCiAgICBpZihsZW5ndGg9PTIpDQogICB7CQkNCgljaFswXT1zdHJbaSsrXTsNCgljaFsxXT1zdHJbaSsrXTsNCgljaDRbMF09IGNoWzBdPj4yOw0KCWNoNFsxXT0gKChjaFswXSYzKTw8NCl8KGNoWzFdPj40KTsvKsi3tqjHsLHfyscwssXX89LGKi8NCgljaDRbMl09ICgoY2hbMV0mMHhGKTw8Mik7CS8qyLe2qMewsd/KxzCyxdfz0sYqLw0KDQogICAgICAgICAgICBmcHJpbnRmKHBpYywgIiVjJWMlYyVjIix0b2NoYXJbY2g0WzBdXSwgdG9jaGFyW2NoNFsxXV0sIHRvY2hhcltjaDRbMl1dLCc9Jyk7DQogICAgICAgIH0NCiAgICBpZihsZW5ndGg9PTEpDQogICB7Y2hbMF09c3RyW2krK107DQoJY2g0WzBdPSBjaFswXT4+MjsNCgljaDRbMV09ICgoY2hbMF0mMyk8PDQpOy8qyLe2qMewsd/KxzCyxdfz0sYqLw0KCQkNCiAgICAgICAgICAgIGZwcmludGYocGljLCAiJWMlYyVjJWMiLHRvY2hhcltjaDRbMF1dLCB0b2NoYXJbY2g0WzFdXSwgJz0nLCc9Jyk7DQogICAgfQ0KCWxlbmd0aC09MzsNCn0NCglmY2xvc2UoZnApO2ZjbG9zZShwaWMpOw0KDQoJcHJpbnRmKCJcbnRpbWU6JWYgc2Vjb25kKHMpIiwoKGRvdWJsZSljbG9jaygpL0NMT0NLU19QRVJfU0VDKSk7DQogICByZXR1cm4gMDsNCn0NCg==